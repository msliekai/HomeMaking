<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hm.mapper.CompanyMapper">

    <!--公司登陆-->
    <select id="comlogin" resultType="com.hm.entity.Company">
        select * from tblfirm where facc=#{facc} and fpwd=#{fpwd}
    </select>
    <!--公司账号验证-->
    <select id="checkfacc" resultType="com.hm.entity.Company">
        select * from tblfirm where facc=#{facc}
    </select>
    <!--公司注册-->
    <insert id="addCompany" parameterType="com.hm.entity.Company">
        INSERT into tblfirm
        (facc,fpwd,fname,flaw,fphone,flawphone,fsite,ftime,ctid,stid) VALUES
        (#{facc},#{fpwd},#{fname},#{flaw},
        #{fphone},#{flawphone},#{fsite},#{ftime},#{ctid},#{stid});
    </insert>
<!--    公司证书资料-->
    <select id="findCreList" parameterType="com.hm.entity.Credential" resultType="com.hm.entity.Credential">
        SELECT c.crename,count(f.creid) as count from tblcre c LEFT JOIN tblfcc f on f.fid=#{fid} and c.creid=f.creid GROUP BY c.crename limit #{page},#{limit};
    </select>
<!--    员工证书资料-->
    <select id="findStfCreList" parameterType="com.hm.entity.Credential" resultType="com.hm.entity.Credential">
       SELECT c.datatype,count(f.dataid) as count from tbldata c LEFT JOIN tblsfdata f on f.fid=#{fid} and c.dataid=f.dataid GROUP BY c.datatype limit #{page},#{limit};
    </select>
<!--    查找公司证书的总数-->
    <select id="comCount" parameterType="com.hm.entity.Credential" resultType="java.lang.Integer">
        select count(*) from tblfcc where fid=#{fid};
    </select>
    <!--    查找员工证书的总数-->
    <select id="stfCount" parameterType="com.hm.entity.Credential" resultType="java.lang.Integer">
        select count(*) from tblsfdata where fid=#{fid};
    </select>
</mapper>